# Nginx configuration to serve .well-known files without redirects
# Add this to your nginx server block for soulplan.net (non-www)

# Serve .well-known files directly without redirecting to www
location /.well-known/ {
    # Don't redirect .well-known files
    # Serve them directly or proxy to your backend
    proxy_pass https://www.soulplan.net;
    proxy_set_header Host www.soulplan.net;

    # Or if files are served directly from nginx:
    # root /path/to/your/public;
    # try_files $uri =404;

    # Set correct content types
    location ~ \.json$ {
        add_header Content-Type application/json;
        add_header Access-Control-Allow-Origin *;
    }

    # apple-app-site-association (no extension)
    location = /.well-known/apple-app-site-association {
        proxy_pass https://www.soulplan.net/.well-known/apple-app-site-association;
        proxy_set_header Host www.soulplan.net;
        add_header Content-Type application/json;
        add_header Access-Control-Allow-Origin *;
    }
}

# Alternative: If you want to serve files directly from nginx without proxy
# Uncomment and modify the path below:
# location /.well-known/ {
#     root /var/www/soulplan/public;
#     try_files $uri =404;
#
#     location ~ \.json$ {
#         add_header Content-Type application/json;
#         add_header Access-Control-Allow-Origin *;
#     }
#
#     location = /.well-known/apple-app-site-association {
#         add_header Content-Type application/json;
#         add_header Access-Control-Allow-Origin *;
#     }
# }
